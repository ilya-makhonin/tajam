"use strict";var headerSlider={slides:document.querySelectorAll(".header_slider_container .header_slider_content"),tabs:document.querySelectorAll(".header_slider_tabs .header_slider_tab"),slideActive:"header_slide_active",tabActive:"header_tab_active",count:0,play:function(){this.autoPlay(),this.clickTab()},autoPlay:function(){var e=this,t=this.tabs,i=this.slides;setInterval(function(){e.count++,3<e.count&&(e.count=0),e.removeClass(t,i),i[e.count].classList.add(e.slideActive),t[e.count].classList.add(e.tabActive)},5e3)},clickTab:function(){for(var t=this.tabs,i=this.slides,s=this,e=function(e){t[e].addEventListener("click",function(){if(this.classList.contains(s.tabActive))return!0;s.removeClass(t,i),this.classList.add(s.tabActive),i[e].classList.add(s.slideActive),s.count=e})},r=0;r<t.length;r++)e(r)},removeClass:function(e,t){for(var i=0;i<e.length;i++)t[i].classList.remove(this.slideActive),e[i].classList.remove(this.tabActive)}},preload={preloader:document.querySelector(".preloader"),done:"done",active:function(){document.body.onload=function(){var e=this;setTimeout(function(){e.preloader.classList.contains(e.done)||e.preloader.classList.add(e.done)},1e3)}.bind(this)}},video={playButton:document.querySelector(".watch_story_play"),playPanel:document.querySelector(".watch_story_pre"),videoContent:document.querySelector(".watch_story_content"),hiddenPlayPanel:"hidden_play_panel",showVideo:"show_video_content",videoRoller:document.querySelector("#video"),playBtn:document.querySelector("#playBtn"),volume:document.querySelector("#volume"),sound:document.querySelector("#sound"),silence:document.querySelector("#soundOff"),render:function(){this.play(),this.controls()},play:function(){var e=this;this.playButton.addEventListener("click",function(){e.playPanel.classList.add(e.hiddenPlayPanel),e.videoContent.classList.add(e.showVideo)})},controls:function(){var e=this;this.volume.value=0,this.volume.min=0,this.volume.max=this.videoRoller.duration;var t=null,i=function(){e.videoRoller.paused?(e.videoRoller.play(),t=setInterval(s,1e3/65),e.playBtn.innerHTML='<i class="fa fa-pause" aria-hidden="true"></i>'):(e.videoRoller.pause(),e.playBtn.innerHTML='<i class="fa fa-play" aria-hidden="true"></i>')},s=function(){e.volume.value=e.videoRoller.currentTime};this.videoRoller.addEventListener("click",i),this.playBtn.addEventListener("click",i),this.volume.addEventListener("mousedown",function(){clearInterval(t),e.videoRoller.paused||i()}),this.volume.addEventListener("mouseup",function(){e.videoRoller.currentTime=e.volume.value,i()}),this.sound.addEventListener("click",function(){if(e.videoRoller.muted)return e.videoRoller.muted=!1,e.sound.innerHTML='<i class="fa fa-volume-up" aria-hidden="true"></i>',!0;e.videoRoller.muted=!0,e.sound.innerHTML='<i class="fa fa-volume-off" aria-hidden="true"></i>'}),this.videoRoller.addEventListener("ended",function(){e.playPanel.classList.remove(e.hiddenPlayPanel),e.videoContent.classList.remove(e.showVideo)})}},review={slides:document.querySelectorAll(".review_slider_content .review_slider_comment"),tabs:document.querySelectorAll(".review_slider_tabs .review_slider_tab"),leftSlide:document.querySelector("#reviewSliderLeft"),rightSlide:document.querySelector("#reviewSliderRight"),activeSlide:"review_comment_active",activeTab:"review_tab_active",startSlide:"start_comment",play:function(){var e=function(){var e=i(this)-1;e<0&&(e=4),this.tabs[e].click()}.bind(this),t=function(){var e=i(this)+1;4<e&&(e=0),this.tabs[e].click()}.bind(this);function i(e){for(var t=0;t<e.tabs.length;t++)if(e.tabs[t].classList.contains(e.activeTab))return parseInt(e.tabs[t].dataset.order)}this.slider(),this.leftSlide.addEventListener("click",e),this.rightSlide.addEventListener("click",t)},slider:function(){for(var t=this,i=this.tabs,s=this.slides,e=function(e){i[e].addEventListener("click",function(){if(this.classList.contains(t.activeTab))return!0;+this.dataset.order>+document.querySelector(".review_tab_active").dataset.order?t.scroll(s[e],"leftSlideHide","rightSlideShow",s,i):t.scroll(s[e],"rightSlideHide","leftSlideShow",s,i),this.classList.add(t.activeTab)})},r=0;r<i.length;r++)e(r)},scroll:function(e,t,i,s,r){document.querySelector(".review_comment_active").style.animation=t+" .5s linear forwards",this.removeClass(r,s),e.style.animation=i+" .5s .5s linear forwards",e.classList.add(this.activeSlide)},removeClass:function(e,t){for(var i=0;i<e.length;i++)t[i].classList.remove(this.activeSlide),t[i].classList.remove(this.startSlide),e[i].classList.remove(this.activeTab)}},validate={userName:document.querySelector("#userName"),userEmail:document.querySelector("#userEmail"),userSubject:document.querySelector("#userSubject"),userMessage:document.querySelector("#userComment"),emailSubscribe:document.querySelector("#subscribeUser"),sendFeedback:document.querySelector("#sendFeedbackForm"),sendSubscribe:document.querySelector("#sendSubscribe"),regName:/[A-Za-zа-яА-Я]{2,}/,regEmail:/\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,6}/,startValid:function(){this.validFeedback(),this.validSubscribe()},validFeedback:function(){var r=this;this.sendFeedback.addEventListener("click",function(){var e=r.regName.test(r.userName.value),t=r.regEmail.test(r.userEmail.value),i=""===r.userSubject.value,s=""===r.userMessage.value;e||r.errorInput(r.userName),t||r.errorInput(r.userEmail),i&&r.errorInput(r.userSubject),s&&r.errorInput(r.userMessage),e&&t&&!i&&!s&&r.sendToServer()})},validSubscribe:function(){var e=this;this.sendSubscribe.addEventListener("click",function(){e.regEmail.test(e.emailSubscribe.value)?e.sendToServer():e.errorInput(e.emailSubscribe)})},errorInput:function(e){event.preventDefault(),e.classList.add("errorInputValue"),e.value="Error data. Invalid format!",setTimeout(function(){e.classList.remove("errorInputValue"),e.value=""},1e3)},sendToServer:function(){console.log("Success!")}};window.addEventListener("load",function(){headerSlider.play(),video.render(),review.play(),validate.startValid()}),preload.active();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiaGVhZGVyU2xpZGVyIiwic2xpZGVzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwidGFicyIsInNsaWRlQWN0aXZlIiwidGFiQWN0aXZlIiwiY291bnQiLCJwbGF5IiwidGhpcyIsImF1dG9QbGF5IiwiY2xpY2tUYWIiLCJfdGhpcyIsInNldEludGVydmFsIiwicmVtb3ZlQ2xhc3MiLCJjbGFzc0xpc3QiLCJhZGQiLCJzbGlkZXJUYWJzIiwic2xpZGVDb250ZW50Iiwic2VsZiIsIl9sb29wIiwiaSIsImFkZEV2ZW50TGlzdGVuZXIiLCJjb250YWlucyIsImxlbmd0aCIsInJlbW92ZSIsInByZWxvYWQiLCJwcmVsb2FkZXIiLCJxdWVyeVNlbGVjdG9yIiwiZG9uZSIsImFjdGl2ZSIsImJvZHkiLCJvbmxvYWQiLCJzZXRUaW1lb3V0IiwiYmluZCIsInZpZGVvIiwicGxheUJ1dHRvbiIsInBsYXlQYW5lbCIsInZpZGVvQ29udGVudCIsImhpZGRlblBsYXlQYW5lbCIsInNob3dWaWRlbyIsInZpZGVvUm9sbGVyIiwicGxheUJ0biIsInZvbHVtZSIsInNvdW5kIiwic2lsZW5jZSIsInJlbmRlciIsImNvbnRyb2xzIiwiX3RoaXMyIiwidmFsdWUiLCJtaW4iLCJtYXgiLCJkdXJhdGlvbiIsInBvc2l0aW9uRHVyYXRpb24iLCJwbGF5T3JQYXVzZSIsInBhdXNlZCIsImluaXRQb3NpdGlvbiIsImlubmVySFRNTCIsInBhdXNlIiwiY3VycmVudFRpbWUiLCJjbGVhckludGVydmFsIiwibXV0ZWQiLCJyZXZpZXciLCJsZWZ0U2xpZGUiLCJyaWdodFNsaWRlIiwiYWN0aXZlU2xpZGUiLCJhY3RpdmVUYWIiLCJzdGFydFNsaWRlIiwic3dpdGNoU2xpZGVMZWZ0Iiwic2VhcmNoQWN0aXZlVGFiIiwiY2xpY2siLCJzd2l0Y2hTbGlkZVJpZ2h0IiwicGFyc2VJbnQiLCJkYXRhc2V0Iiwib3JkZXIiLCJzbGlkZXIiLCJzY3JvbGwiLCJzbGlkZU51bWJlciIsImhpZGUiLCJzaG93Iiwic3R5bGUiLCJhbmltYXRpb24iLCJ2YWxpZGF0ZSIsInVzZXJOYW1lIiwidXNlckVtYWlsIiwidXNlclN1YmplY3QiLCJ1c2VyTWVzc2FnZSIsImVtYWlsU3Vic2NyaWJlIiwic2VuZEZlZWRiYWNrIiwic2VuZFN1YnNjcmliZSIsInJlZ05hbWUiLCJyZWdFbWFpbCIsInN0YXJ0VmFsaWQiLCJ2YWxpZEZlZWRiYWNrIiwidmFsaWRTdWJzY3JpYmUiLCJuYW1lIiwidGVzdCIsImVtYWlsIiwic3ViamVjdCIsIm1lc3NhZ2UiLCJlcnJvcklucHV0Iiwic2VuZFRvU2VydmVyIiwiZWxlbWVudCIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJjb25zb2xlIiwibG9nIiwid2luZG93Il0sIm1hcHBpbmdzIjoiQUFrQkEsYUFFQSxJQUFJQSxhQUFlLENBQ2ZDLE9BQVFDLFNBQVNDLGlCQUFpQixtREFDbENDLEtBQU1GLFNBQVNDLGlCQUFpQiwwQ0FDaENFLFlBQWEsc0JBQ2JDLFVBQVcsb0JBQ1hDLE1BQU8sRUFFUEMsS0FBTSxXQUNGQyxLQUFLQyxXQUNMRCxLQUFLRSxZQUVURCxTQUFVLFdBQ04sSUFBSUUsRUFBUUgsS0FFUkwsRUFBT0ssS0FBS0wsS0FDWkgsRUFBU1EsS0FBS1IsT0FFbEJZLFlBQVksV0FDUkQsRUFBTUwsUUFFWSxFQUFkSyxFQUFNTCxRQUNOSyxFQUFNTCxNQUFRLEdBR2xCSyxFQUFNRSxZQUFZVixFQUFNSCxHQUV4QkEsRUFBT1csRUFBTUwsT0FBT1EsVUFBVUMsSUFBSUosRUFBTVAsYUFDeENELEVBQUtRLEVBQU1MLE9BQU9RLFVBQVVDLElBQUlKLEVBQU1OLFlBQ3ZDLE1BRVBLLFNBQVUsV0FpQk4sSUFoQkEsSUFBSU0sRUFBYVIsS0FBS0wsS0FDbEJjLEVBQWVULEtBQUtSLE9BQ3BCa0IsRUFBT1YsS0FFUFcsRUFBUSxTQUFlQyxHQUN2QkosRUFBV0ksR0FBR0MsaUJBQWlCLFFBQVMsV0FDcEMsR0FBSWIsS0FBS00sVUFBVVEsU0FBU0osRUFBS2IsV0FBWSxPQUFPLEVBRXBEYSxFQUFLTCxZQUFZRyxFQUFZQyxHQUU3QlQsS0FBS00sVUFBVUMsSUFBSUcsRUFBS2IsV0FDeEJZLEVBQWFHLEdBQUdOLFVBQVVDLElBQUlHLEVBQUtkLGFBQ25DYyxFQUFLWixNQUFRYyxLQUlaQSxFQUFJLEVBQUdBLEVBQUlKLEVBQVdPLE9BQVFILElBQ25DRCxFQUFNQyxJQUdkUCxZQUFhLFNBQXFCVixFQUFNSCxHQUNwQyxJQUFLLElBQUlvQixFQUFJLEVBQUdBLEVBQUlqQixFQUFLb0IsT0FBUUgsSUFDN0JwQixFQUFPb0IsR0FBR04sVUFBVVUsT0FBT2hCLEtBQUtKLGFBQ2hDRCxFQUFLaUIsR0FBR04sVUFBVVUsT0FBT2hCLEtBQUtILGFBTXRDb0IsUUFBVSxDQUNWQyxVQUFXekIsU0FBUzBCLGNBQWMsY0FDbENDLEtBQU0sT0FFTkMsT0FBUSxXQUNKNUIsU0FBUzZCLEtBQUtDLE9BQVMsV0FDbkIsSUFBSXBCLEVBQVFILEtBRVp3QixXQUFXLFdBQ0ZyQixFQUFNZSxVQUFVWixVQUFVUSxTQUFTWCxFQUFNaUIsT0FDMUNqQixFQUFNZSxVQUFVWixVQUFVQyxJQUFJSixFQUFNaUIsT0FFekMsTUFDTEssS0FBS3pCLFFBS1gwQixNQUFRLENBQ1JDLFdBQVlsQyxTQUFTMEIsY0FBYyxxQkFDbkNTLFVBQVduQyxTQUFTMEIsY0FBYyxvQkFDbENVLGFBQWNwQyxTQUFTMEIsY0FBYyx3QkFDckNXLGdCQUFpQixvQkFDakJDLFVBQVcscUJBRVhDLFlBQWF2QyxTQUFTMEIsY0FBYyxVQUNwQ2MsUUFBU3hDLFNBQVMwQixjQUFjLFlBQ2hDZSxPQUFRekMsU0FBUzBCLGNBQWMsV0FDL0JnQixNQUFPMUMsU0FBUzBCLGNBQWMsVUFDOUJpQixRQUFTM0MsU0FBUzBCLGNBQWMsYUFFaENrQixPQUFRLFdBQ0pyQyxLQUFLRCxPQUNMQyxLQUFLc0MsWUFFVHZDLEtBQU0sV0FDRixJQUFJSSxFQUFRSCxLQUVaQSxLQUFLMkIsV0FBV2QsaUJBQWlCLFFBQVMsV0FDdENWLEVBQU15QixVQUFVdEIsVUFBVUMsSUFBSUosRUFBTTJCLGlCQUNwQzNCLEVBQU0wQixhQUFhdkIsVUFBVUMsSUFBSUosRUFBTTRCLGNBRy9DTyxTQUFVLFdBQ04sSUFBSUMsRUFBU3ZDLEtBRWJBLEtBQUtrQyxPQUFPTSxNQUFRLEVBQ3BCeEMsS0FBS2tDLE9BQU9PLElBQU0sRUFDbEJ6QyxLQUFLa0MsT0FBT1EsSUFBTTFDLEtBQUtnQyxZQUFZVyxTQUVuQyxJQUFJQyxFQUFtQixLQUVuQkMsRUFBYyxXQUNWTixFQUFPUCxZQUFZYyxRQUNuQlAsRUFBT1AsWUFBWWpDLE9BQ25CNkMsRUFBbUJ4QyxZQUFZMkMsRUFBYyxJQUFPLElBQ3BEUixFQUFPTixRQUFRZSxVQUFZLG1EQUUzQlQsRUFBT1AsWUFBWWlCLFFBQ25CVixFQUFPTixRQUFRZSxVQUFZLGtEQUkvQkQsRUFBZSxXQUNmUixFQUFPTCxPQUFPTSxNQUFRRCxFQUFPUCxZQUFZa0IsYUFjN0NsRCxLQUFLZ0MsWUFBWW5CLGlCQUFpQixRQUFTZ0MsR0FDM0M3QyxLQUFLaUMsUUFBUXBCLGlCQUFpQixRQUFTZ0MsR0FDdkM3QyxLQUFLa0MsT0FBT3JCLGlCQUFpQixZQUFhLFdBQ3RDc0MsY0FBY1AsR0FDVkwsRUFBT1AsWUFBWWMsUUFDbkJELE1BR1I3QyxLQUFLa0MsT0FBT3JCLGlCQUFpQixVQUFXLFdBQ3BDMEIsRUFBT1AsWUFBWWtCLFlBQWNYLEVBQU9MLE9BQU9NLE1BQy9DSyxNQUVKN0MsS0FBS21DLE1BQU10QixpQkFBaUIsUUF2QmpCLFdBQ1AsR0FBSTBCLEVBQU9QLFlBQVlvQixNQUduQixPQUZBYixFQUFPUCxZQUFZb0IsT0FBUSxFQUMzQmIsRUFBT0osTUFBTWEsVUFBWSxzREFDbEIsRUFHWFQsRUFBT1AsWUFBWW9CLE9BQVEsRUFDM0JiLEVBQU9KLE1BQU1hLFVBQVksd0RBZ0I3QmhELEtBQUtnQyxZQUFZbkIsaUJBQWlCLFFBQVMsV0FDdkMwQixFQUFPWCxVQUFVdEIsVUFBVVUsT0FBT3VCLEVBQU9ULGlCQUN6Q1MsRUFBT1YsYUFBYXZCLFVBQVVVLE9BQU91QixFQUFPUixlQU1wRHNCLE9BQVMsQ0FDVDdELE9BQVFDLFNBQVNDLGlCQUFpQixpREFDbENDLEtBQU1GLFNBQVNDLGlCQUFpQiwwQ0FDaEM0RCxVQUFXN0QsU0FBUzBCLGNBQWMscUJBQ2xDb0MsV0FBWTlELFNBQVMwQixjQUFjLHNCQUNuQ3FDLFlBQWEsd0JBQ2JDLFVBQVcsb0JBQ1hDLFdBQVksZ0JBRVozRCxLQUFNLFdBQ0YsSUFBSTRELEVBQWtCLFdBQ2xCLElBQUk3RCxFQUFROEQsRUFBZ0I1RCxNQUFRLEVBQ2hDRixFQUFRLElBQ1JBLEVBQVEsR0FFWkUsS0FBS0wsS0FBS0csR0FBTytELFNBQ25CcEMsS0FBS3pCLE1BRUg4RCxFQUFtQixXQUNuQixJQUFJaEUsRUFBUThELEVBQWdCNUQsTUFBUSxFQUN4QixFQUFSRixJQUNBQSxFQUFRLEdBRVpFLEtBQUtMLEtBQUtHLEdBQU8rRCxTQUNuQnBDLEtBQUt6QixNQUVQLFNBQVM0RCxFQUFnQmxELEdBQ3JCLElBQUssSUFBSUUsRUFBSSxFQUFHQSxFQUFJRixFQUFLZixLQUFLb0IsT0FBUUgsSUFDbEMsR0FBSUYsRUFBS2YsS0FBS2lCLEdBQUdOLFVBQVVRLFNBQVNKLEVBQUsrQyxXQUNyQyxPQUFPTSxTQUFTckQsRUFBS2YsS0FBS2lCLEdBQUdvRCxRQUFRQyxPQUtqRGpFLEtBQUtrRSxTQUNMbEUsS0FBS3NELFVBQVV6QyxpQkFBaUIsUUFBUzhDLEdBQ3pDM0QsS0FBS3VELFdBQVcxQyxpQkFBaUIsUUFBU2lELElBRTlDSSxPQUFRLFdBbUJKLElBbEJBLElBQUl4RCxFQUFPVixLQUNQTCxFQUFPSyxLQUFLTCxLQUNaSCxFQUFTUSxLQUFLUixPQUVkbUIsRUFBUSxTQUFlQyxHQUN2QmpCLEVBQUtpQixHQUFHQyxpQkFBaUIsUUFBUyxXQUM5QixHQUFJYixLQUFLTSxVQUFVUSxTQUFTSixFQUFLK0MsV0FBWSxPQUFPLEdBRS9DekQsS0FBS2dFLFFBQVFDLE9BQVN4RSxTQUFTMEIsY0FBYyxzQkFBc0I2QyxRQUFRQyxNQUM1RXZELEVBQUt5RCxPQUFPM0UsRUFBT29CLEdBQUksZ0JBQWlCLGlCQUFrQnBCLEVBQVFHLEdBRWxFZSxFQUFLeUQsT0FBTzNFLEVBQU9vQixHQUFJLGlCQUFrQixnQkFBaUJwQixFQUFRRyxHQUd0RUssS0FBS00sVUFBVUMsSUFBSUcsRUFBSytDLGNBSXZCN0MsRUFBSSxFQUFHQSxFQUFJakIsRUFBS29CLE9BQVFILElBQzdCRCxFQUFNQyxJQUdkdUQsT0FBUSxTQUFnQkMsRUFBYUMsRUFBTUMsRUFBTTlFLEVBQVFHLEdBQ25DRixTQUFTMEIsY0FBYywwQkFDN0JvRCxNQUFNQyxVQUFZSCxFQUFPLHVCQUNyQ3JFLEtBQUtLLFlBQVlWLEVBQU1ILEdBQ3ZCNEUsRUFBWUcsTUFBTUMsVUFBWUYsRUFBTywyQkFDckNGLEVBQVk5RCxVQUFVQyxJQUFJUCxLQUFLd0QsY0FFbkNuRCxZQUFhLFNBQXFCVixFQUFNSCxHQUNwQyxJQUFLLElBQUlvQixFQUFJLEVBQUdBLEVBQUlqQixFQUFLb0IsT0FBUUgsSUFDN0JwQixFQUFPb0IsR0FBR04sVUFBVVUsT0FBT2hCLEtBQUt3RCxhQUNoQ2hFLEVBQU9vQixHQUFHTixVQUFVVSxPQUFPaEIsS0FBSzBELFlBQ2hDL0QsRUFBS2lCLEdBQUdOLFVBQVVVLE9BQU9oQixLQUFLeUQsYUFNdENnQixTQUFXLENBQ1hDLFNBQVVqRixTQUFTMEIsY0FBYyxhQUNqQ3dELFVBQVdsRixTQUFTMEIsY0FBYyxjQUNsQ3lELFlBQWFuRixTQUFTMEIsY0FBYyxnQkFDcEMwRCxZQUFhcEYsU0FBUzBCLGNBQWMsZ0JBQ3BDMkQsZUFBZ0JyRixTQUFTMEIsY0FBYyxrQkFDdkM0RCxhQUFjdEYsU0FBUzBCLGNBQWMscUJBQ3JDNkQsY0FBZXZGLFNBQVMwQixjQUFjLGtCQUN0QzhELFFBQVMscUJBQ1RDLFNBQVUsaUNBRVZDLFdBQVksV0FDUm5GLEtBQUtvRixnQkFDTHBGLEtBQUtxRixrQkFFVEQsY0FBZSxXQUNYLElBQUlqRixFQUFRSCxLQUVaQSxLQUFLK0UsYUFBYWxFLGlCQUFpQixRQUFTLFdBQ3hDLElBQUl5RSxFQUFPbkYsRUFBTThFLFFBQVFNLEtBQUtwRixFQUFNdUUsU0FBU2xDLE9BQ3pDZ0QsRUFBUXJGLEVBQU0rRSxTQUFTSyxLQUFLcEYsRUFBTXdFLFVBQVVuQyxPQUM1Q2lELEVBQXNDLEtBQTVCdEYsRUFBTXlFLFlBQVlwQyxNQUM1QmtELEVBQXNDLEtBQTVCdkYsRUFBTTBFLFlBQVlyQyxNQUUzQjhDLEdBQ0RuRixFQUFNd0YsV0FBV3hGLEVBQU11RSxVQUd0QmMsR0FDRHJGLEVBQU13RixXQUFXeEYsRUFBTXdFLFdBR3ZCYyxHQUNBdEYsRUFBTXdGLFdBQVd4RixFQUFNeUUsYUFHdkJjLEdBQ0F2RixFQUFNd0YsV0FBV3hGLEVBQU0wRSxhQUd2QlMsR0FBUUUsSUFBVUMsSUFBWUMsR0FDOUJ2RixFQUFNeUYsa0JBSWxCUCxlQUFnQixXQUNaLElBQUk5QyxFQUFTdkMsS0FFYkEsS0FBS2dGLGNBQWNuRSxpQkFBaUIsUUFBUyxXQUNwQzBCLEVBQU8yQyxTQUFTSyxLQUFLaEQsRUFBT3VDLGVBQWV0QyxPQUc1Q0QsRUFBT3FELGVBRlByRCxFQUFPb0QsV0FBV3BELEVBQU91QyxtQkFNckNhLFdBQVksU0FBb0JFLEdBQzVCQyxNQUFNQyxpQkFDTkYsRUFBUXZGLFVBQVVDLElBQUksbUJBQ3RCc0YsRUFBUXJELE1BQVEsOEJBRWhCaEIsV0FBVyxXQUNQcUUsRUFBUXZGLFVBQVVVLE9BQU8sbUJBQ3pCNkUsRUFBUXJELE1BQVEsSUFDakIsTUFFUG9ELGFBQWMsV0FDVkksUUFBUUMsSUFBSSxjQUlwQkMsT0FBT3JGLGlCQUFpQixPQUFRLFdBQzVCdEIsYUFBYVEsT0FDYjJCLE1BQU1XLFNBQ05nQixPQUFPdEQsT0FDUDBFLFNBQVNVLGVBR2JsRSxRQUFRSSIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIERlcGVuZGVuY2llc1xyXG4gKiBAanF1ZXJ5IHYzLjMuMSAtIG5vdCBjb25uZWN0ZWRcclxuICogQGJvb3RzdHJhcCB2My4zLjcgLSBub3QgY29ubmVjdGVkXHJcbiAqIEBsb2Rhc2ggdjQuMTcuNSAtIG5vdCBjb25uZWN0ZWRcclxuICogQGF4aW9zIHYwLjE4LjAgLSBub3QgY29ubmVjdGVkXHJcbiAqIEBwb3BwZXIgLSBub3QgY29ubmVjdGVkXHJcbiAqL1xyXG5cclxuLy9AIC4uLy4uL2Jvd2VyX2NvbXBvbmVudHMvanF1ZXJ5L2Rpc3QvanF1ZXJ5LmpzXHJcbi8vQCAuLi8uLi9fcGFja2FnZXNEZXZlbG9wL3BvcHBlci5qcy9wb3BwZXIubWluLmpzXHJcbi8vQCAuLi8uLi9ib3dlcl9jb21wb25lbnRzL2Jvb3RzdHJhcC9kaXN0L2pzL2Jvb3RzdHJhcC5qc1xyXG5cclxuXHJcbi8qKlxyXG4gKiBDdXN0b20gc2NyaXB0c1xyXG4gKi9cclxuXHJcbid1c2Ugc3RyaWN0JztcclxuXHJcbnZhciBoZWFkZXJTbGlkZXIgPSB7XHJcbiAgICBzbGlkZXM6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5oZWFkZXJfc2xpZGVyX2NvbnRhaW5lciAuaGVhZGVyX3NsaWRlcl9jb250ZW50JyksXHJcbiAgICB0YWJzOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaGVhZGVyX3NsaWRlcl90YWJzIC5oZWFkZXJfc2xpZGVyX3RhYicpLFxyXG4gICAgc2xpZGVBY3RpdmU6ICdoZWFkZXJfc2xpZGVfYWN0aXZlJyxcclxuICAgIHRhYkFjdGl2ZTogJ2hlYWRlcl90YWJfYWN0aXZlJyxcclxuICAgIGNvdW50OiAwLFxyXG5cclxuICAgIHBsYXk6IGZ1bmN0aW9uIHBsYXkoKSB7XHJcbiAgICAgICAgdGhpcy5hdXRvUGxheSgpO1xyXG4gICAgICAgIHRoaXMuY2xpY2tUYWIoKTtcclxuICAgIH0sXHJcbiAgICBhdXRvUGxheTogZnVuY3Rpb24gYXV0b1BsYXkoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHJcbiAgICAgICAgdmFyIHRhYnMgPSB0aGlzLnRhYnM7XHJcbiAgICAgICAgdmFyIHNsaWRlcyA9IHRoaXMuc2xpZGVzO1xyXG5cclxuICAgICAgICBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmNvdW50Kys7XHJcblxyXG4gICAgICAgICAgICBpZiAoX3RoaXMuY291bnQgPiAzKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5jb3VudCA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIF90aGlzLnJlbW92ZUNsYXNzKHRhYnMsIHNsaWRlcyk7XHJcblxyXG4gICAgICAgICAgICBzbGlkZXNbX3RoaXMuY291bnRdLmNsYXNzTGlzdC5hZGQoX3RoaXMuc2xpZGVBY3RpdmUpO1xyXG4gICAgICAgICAgICB0YWJzW190aGlzLmNvdW50XS5jbGFzc0xpc3QuYWRkKF90aGlzLnRhYkFjdGl2ZSk7XHJcbiAgICAgICAgfSwgNTAwMCk7XHJcbiAgICB9LFxyXG4gICAgY2xpY2tUYWI6IGZ1bmN0aW9uIGNsaWNrVGFiKCkge1xyXG4gICAgICAgIHZhciBzbGlkZXJUYWJzID0gdGhpcy50YWJzO1xyXG4gICAgICAgIHZhciBzbGlkZUNvbnRlbnQgPSB0aGlzLnNsaWRlcztcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKGkpIHtcclxuICAgICAgICAgICAgc2xpZGVyVGFic1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNsYXNzTGlzdC5jb250YWlucyhzZWxmLnRhYkFjdGl2ZSkpIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIHNlbGYucmVtb3ZlQ2xhc3Moc2xpZGVyVGFicywgc2xpZGVDb250ZW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoc2VsZi50YWJBY3RpdmUpO1xyXG4gICAgICAgICAgICAgICAgc2xpZGVDb250ZW50W2ldLmNsYXNzTGlzdC5hZGQoc2VsZi5zbGlkZUFjdGl2ZSk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmNvdW50ID0gaTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzbGlkZXJUYWJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIF9sb29wKGkpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICByZW1vdmVDbGFzczogZnVuY3Rpb24gcmVtb3ZlQ2xhc3ModGFicywgc2xpZGVzKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0YWJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHNsaWRlc1tpXS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuc2xpZGVBY3RpdmUpO1xyXG4gICAgICAgICAgICB0YWJzW2ldLmNsYXNzTGlzdC5yZW1vdmUodGhpcy50YWJBY3RpdmUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyIHByZWxvYWQgPSB7XHJcbiAgICBwcmVsb2FkZXI6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcmVsb2FkZXInKSxcclxuICAgIGRvbmU6ICdkb25lJyxcclxuXHJcbiAgICBhY3RpdmU6IGZ1bmN0aW9uIGFjdGl2ZSgpIHtcclxuICAgICAgICBkb2N1bWVudC5ib2R5Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5wcmVsb2FkZXIuY2xhc3NMaXN0LmNvbnRhaW5zKF90aGlzLmRvbmUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMucHJlbG9hZGVyLmNsYXNzTGlzdC5hZGQoX3RoaXMuZG9uZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIDEwMDApO1xyXG4gICAgICAgIH0uYmluZCh0aGlzKTtcclxuICAgIH1cclxufTtcclxuJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyIHZpZGVvID0ge1xyXG4gICAgcGxheUJ1dHRvbjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndhdGNoX3N0b3J5X3BsYXknKSxcclxuICAgIHBsYXlQYW5lbDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndhdGNoX3N0b3J5X3ByZScpLFxyXG4gICAgdmlkZW9Db250ZW50OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud2F0Y2hfc3RvcnlfY29udGVudCcpLFxyXG4gICAgaGlkZGVuUGxheVBhbmVsOiAnaGlkZGVuX3BsYXlfcGFuZWwnLFxyXG4gICAgc2hvd1ZpZGVvOiAnc2hvd192aWRlb19jb250ZW50JyxcclxuXHJcbiAgICB2aWRlb1JvbGxlcjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3ZpZGVvJyksXHJcbiAgICBwbGF5QnRuOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcGxheUJ0bicpLFxyXG4gICAgdm9sdW1lOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdm9sdW1lJyksXHJcbiAgICBzb3VuZDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NvdW5kJyksXHJcbiAgICBzaWxlbmNlOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc291bmRPZmYnKSxcclxuXHJcbiAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcclxuICAgICAgICB0aGlzLnBsYXkoKTtcclxuICAgICAgICB0aGlzLmNvbnRyb2xzKCk7XHJcbiAgICB9LFxyXG4gICAgcGxheTogZnVuY3Rpb24gcGxheSgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG5cclxuICAgICAgICB0aGlzLnBsYXlCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLnBsYXlQYW5lbC5jbGFzc0xpc3QuYWRkKF90aGlzLmhpZGRlblBsYXlQYW5lbCk7XHJcbiAgICAgICAgICAgIF90aGlzLnZpZGVvQ29udGVudC5jbGFzc0xpc3QuYWRkKF90aGlzLnNob3dWaWRlbyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgY29udHJvbHM6IGZ1bmN0aW9uIGNvbnRyb2xzKCkge1xyXG4gICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xyXG5cclxuICAgICAgICB0aGlzLnZvbHVtZS52YWx1ZSA9IDA7XHJcbiAgICAgICAgdGhpcy52b2x1bWUubWluID0gMDtcclxuICAgICAgICB0aGlzLnZvbHVtZS5tYXggPSB0aGlzLnZpZGVvUm9sbGVyLmR1cmF0aW9uO1xyXG5cclxuICAgICAgICB2YXIgcG9zaXRpb25EdXJhdGlvbiA9IG51bGw7XHJcblxyXG4gICAgICAgIHZhciBwbGF5T3JQYXVzZSA9IGZ1bmN0aW9uIHBsYXlPclBhdXNlKCkge1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMyLnZpZGVvUm9sbGVyLnBhdXNlZCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMyLnZpZGVvUm9sbGVyLnBsYXkoKTtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uRHVyYXRpb24gPSBzZXRJbnRlcnZhbChpbml0UG9zaXRpb24sIDEwMDAgLyA2NSk7XHJcbiAgICAgICAgICAgICAgICBfdGhpczIucGxheUJ0bi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9XCJmYSBmYS1wYXVzZVwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4nO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMyLnZpZGVvUm9sbGVyLnBhdXNlKCk7XHJcbiAgICAgICAgICAgICAgICBfdGhpczIucGxheUJ0bi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9XCJmYSBmYS1wbGF5XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgaW5pdFBvc2l0aW9uID0gZnVuY3Rpb24gaW5pdFBvc2l0aW9uKCkge1xyXG4gICAgICAgICAgICBfdGhpczIudm9sdW1lLnZhbHVlID0gX3RoaXMyLnZpZGVvUm9sbGVyLmN1cnJlbnRUaW1lO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBtdXRlID0gZnVuY3Rpb24gbXV0ZSgpIHtcclxuICAgICAgICAgICAgaWYgKF90aGlzMi52aWRlb1JvbGxlci5tdXRlZCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMyLnZpZGVvUm9sbGVyLm11dGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBfdGhpczIuc291bmQuaW5uZXJIVE1MID0gJzxpIGNsYXNzPVwiZmEgZmEtdm9sdW1lLXVwXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPic7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgX3RoaXMyLnZpZGVvUm9sbGVyLm11dGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgX3RoaXMyLnNvdW5kLmlubmVySFRNTCA9ICc8aSBjbGFzcz1cImZhIGZhLXZvbHVtZS1vZmZcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+JztcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnZpZGVvUm9sbGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcGxheU9yUGF1c2UpO1xyXG4gICAgICAgIHRoaXMucGxheUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHBsYXlPclBhdXNlKTtcclxuICAgICAgICB0aGlzLnZvbHVtZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwocG9zaXRpb25EdXJhdGlvbik7XHJcbiAgICAgICAgICAgIGlmIChfdGhpczIudmlkZW9Sb2xsZXIucGF1c2VkKSB7fSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHBsYXlPclBhdXNlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnZvbHVtZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpczIudmlkZW9Sb2xsZXIuY3VycmVudFRpbWUgPSBfdGhpczIudm9sdW1lLnZhbHVlO1xyXG4gICAgICAgICAgICBwbGF5T3JQYXVzZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuc291bmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBtdXRlKTtcclxuICAgICAgICB0aGlzLnZpZGVvUm9sbGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpczIucGxheVBhbmVsLmNsYXNzTGlzdC5yZW1vdmUoX3RoaXMyLmhpZGRlblBsYXlQYW5lbCk7XHJcbiAgICAgICAgICAgIF90aGlzMi52aWRlb0NvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZShfdGhpczIuc2hvd1ZpZGVvKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufTtcclxuJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyIHJldmlldyA9IHtcclxuICAgIHNsaWRlczogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJldmlld19zbGlkZXJfY29udGVudCAucmV2aWV3X3NsaWRlcl9jb21tZW50JyksXHJcbiAgICB0YWJzOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucmV2aWV3X3NsaWRlcl90YWJzIC5yZXZpZXdfc2xpZGVyX3RhYicpLFxyXG4gICAgbGVmdFNsaWRlOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcmV2aWV3U2xpZGVyTGVmdCcpLFxyXG4gICAgcmlnaHRTbGlkZTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Jldmlld1NsaWRlclJpZ2h0JyksXHJcbiAgICBhY3RpdmVTbGlkZTogJ3Jldmlld19jb21tZW50X2FjdGl2ZScsXHJcbiAgICBhY3RpdmVUYWI6ICdyZXZpZXdfdGFiX2FjdGl2ZScsXHJcbiAgICBzdGFydFNsaWRlOiAnc3RhcnRfY29tbWVudCcsXHJcblxyXG4gICAgcGxheTogZnVuY3Rpb24gcGxheSgpIHtcclxuICAgICAgICB2YXIgc3dpdGNoU2xpZGVMZWZ0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgY291bnQgPSBzZWFyY2hBY3RpdmVUYWIodGhpcykgLSAxO1xyXG4gICAgICAgICAgICBpZiAoY291bnQgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb3VudCA9IDQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy50YWJzW2NvdW50XS5jbGljaygpO1xyXG4gICAgICAgIH0uYmluZCh0aGlzKTtcclxuXHJcbiAgICAgICAgdmFyIHN3aXRjaFNsaWRlUmlnaHQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBjb3VudCA9IHNlYXJjaEFjdGl2ZVRhYih0aGlzKSArIDE7XHJcbiAgICAgICAgICAgIGlmIChjb3VudCA+IDQpIHtcclxuICAgICAgICAgICAgICAgIGNvdW50ID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnRhYnNbY291bnRdLmNsaWNrKCk7XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBzZWFyY2hBY3RpdmVUYWIoc2VsZikge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGYudGFicy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGYudGFic1tpXS5jbGFzc0xpc3QuY29udGFpbnMoc2VsZi5hY3RpdmVUYWIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KHNlbGYudGFic1tpXS5kYXRhc2V0Lm9yZGVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zbGlkZXIoKTtcclxuICAgICAgICB0aGlzLmxlZnRTbGlkZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHN3aXRjaFNsaWRlTGVmdCk7XHJcbiAgICAgICAgdGhpcy5yaWdodFNsaWRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc3dpdGNoU2xpZGVSaWdodCk7XHJcbiAgICB9LFxyXG4gICAgc2xpZGVyOiBmdW5jdGlvbiBzbGlkZXIoKSB7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHZhciB0YWJzID0gdGhpcy50YWJzO1xyXG4gICAgICAgIHZhciBzbGlkZXMgPSB0aGlzLnNsaWRlcztcclxuXHJcbiAgICAgICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoaSkge1xyXG4gICAgICAgICAgICB0YWJzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2xhc3NMaXN0LmNvbnRhaW5zKHNlbGYuYWN0aXZlVGFiKSkgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCt0aGlzLmRhdGFzZXQub3JkZXIgPiArZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJldmlld190YWJfYWN0aXZlJykuZGF0YXNldC5vcmRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuc2Nyb2xsKHNsaWRlc1tpXSwgJ2xlZnRTbGlkZUhpZGUnLCAncmlnaHRTbGlkZVNob3cnLCBzbGlkZXMsIHRhYnMpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnNjcm9sbChzbGlkZXNbaV0sICdyaWdodFNsaWRlSGlkZScsICdsZWZ0U2xpZGVTaG93Jywgc2xpZGVzLCB0YWJzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoc2VsZi5hY3RpdmVUYWIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRhYnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgX2xvb3AoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIHNjcm9sbDogZnVuY3Rpb24gc2Nyb2xsKHNsaWRlTnVtYmVyLCBoaWRlLCBzaG93LCBzbGlkZXMsIHRhYnMpIHtcclxuICAgICAgICB2YXIgYWN0aXZlU2xpZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucmV2aWV3X2NvbW1lbnRfYWN0aXZlJyk7XHJcbiAgICAgICAgYWN0aXZlU2xpZGUuc3R5bGUuYW5pbWF0aW9uID0gaGlkZSArICcgLjVzIGxpbmVhciBmb3J3YXJkcyc7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVDbGFzcyh0YWJzLCBzbGlkZXMpO1xyXG4gICAgICAgIHNsaWRlTnVtYmVyLnN0eWxlLmFuaW1hdGlvbiA9IHNob3cgKyAnIC41cyAuNXMgbGluZWFyIGZvcndhcmRzJztcclxuICAgICAgICBzbGlkZU51bWJlci5jbGFzc0xpc3QuYWRkKHRoaXMuYWN0aXZlU2xpZGUpO1xyXG4gICAgfSxcclxuICAgIHJlbW92ZUNsYXNzOiBmdW5jdGlvbiByZW1vdmVDbGFzcyh0YWJzLCBzbGlkZXMpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRhYnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgc2xpZGVzW2ldLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5hY3RpdmVTbGlkZSk7XHJcbiAgICAgICAgICAgIHNsaWRlc1tpXS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuc3RhcnRTbGlkZSk7XHJcbiAgICAgICAgICAgIHRhYnNbaV0uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmFjdGl2ZVRhYik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG4ndXNlIHN0cmljdCc7XHJcblxyXG52YXIgdmFsaWRhdGUgPSB7XHJcbiAgICB1c2VyTmFtZTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3VzZXJOYW1lJyksXHJcbiAgICB1c2VyRW1haWw6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN1c2VyRW1haWwnKSxcclxuICAgIHVzZXJTdWJqZWN0OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdXNlclN1YmplY3QnKSxcclxuICAgIHVzZXJNZXNzYWdlOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdXNlckNvbW1lbnQnKSxcclxuICAgIGVtYWlsU3Vic2NyaWJlOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc3Vic2NyaWJlVXNlcicpLFxyXG4gICAgc2VuZEZlZWRiYWNrOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2VuZEZlZWRiYWNrRm9ybScpLFxyXG4gICAgc2VuZFN1YnNjcmliZTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlbmRTdWJzY3JpYmUnKSxcclxuICAgIHJlZ05hbWU6IC9bQS1aYS160LAt0Y/QkC3Qr117Mix9LyxcclxuICAgIHJlZ0VtYWlsOiAvXFx3K0BbYS16QS1aX10rP1xcLlthLXpBLVpdezIsNn0vLFxyXG5cclxuICAgIHN0YXJ0VmFsaWQ6IGZ1bmN0aW9uIHN0YXJ0VmFsaWQoKSB7XHJcbiAgICAgICAgdGhpcy52YWxpZEZlZWRiYWNrKCk7XHJcbiAgICAgICAgdGhpcy52YWxpZFN1YnNjcmliZSgpO1xyXG4gICAgfSxcclxuICAgIHZhbGlkRmVlZGJhY2s6IGZ1bmN0aW9uIHZhbGlkRmVlZGJhY2soKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHJcbiAgICAgICAgdGhpcy5zZW5kRmVlZGJhY2suYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBuYW1lID0gX3RoaXMucmVnTmFtZS50ZXN0KF90aGlzLnVzZXJOYW1lLnZhbHVlKSxcclxuICAgICAgICAgICAgICAgIGVtYWlsID0gX3RoaXMucmVnRW1haWwudGVzdChfdGhpcy51c2VyRW1haWwudmFsdWUpLFxyXG4gICAgICAgICAgICAgICAgc3ViamVjdCA9IF90aGlzLnVzZXJTdWJqZWN0LnZhbHVlID09PSAnJyxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBfdGhpcy51c2VyTWVzc2FnZS52YWx1ZSA9PT0gJyc7XHJcblxyXG4gICAgICAgICAgICBpZiAoIW5hbWUpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmVycm9ySW5wdXQoX3RoaXMudXNlck5hbWUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIWVtYWlsKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5lcnJvcklucHV0KF90aGlzLnVzZXJFbWFpbCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChzdWJqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5lcnJvcklucHV0KF90aGlzLnVzZXJTdWJqZWN0KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmVycm9ySW5wdXQoX3RoaXMudXNlck1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAobmFtZSAmJiBlbWFpbCAmJiAhc3ViamVjdCAmJiAhbWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuc2VuZFRvU2VydmVyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICB2YWxpZFN1YnNjcmliZTogZnVuY3Rpb24gdmFsaWRTdWJzY3JpYmUoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XHJcblxyXG4gICAgICAgIHRoaXMuc2VuZFN1YnNjcmliZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCFfdGhpczIucmVnRW1haWwudGVzdChfdGhpczIuZW1haWxTdWJzY3JpYmUudmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpczIuZXJyb3JJbnB1dChfdGhpczIuZW1haWxTdWJzY3JpYmUpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMyLnNlbmRUb1NlcnZlcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgZXJyb3JJbnB1dDogZnVuY3Rpb24gZXJyb3JJbnB1dChlbGVtZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2Vycm9ySW5wdXRWYWx1ZScpO1xyXG4gICAgICAgIGVsZW1lbnQudmFsdWUgPSAnRXJyb3IgZGF0YS4gSW52YWxpZCBmb3JtYXQhJztcclxuXHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZXJyb3JJbnB1dFZhbHVlJyk7XHJcbiAgICAgICAgICAgIGVsZW1lbnQudmFsdWUgPSAnJztcclxuICAgICAgICB9LCAxMDAwKTtcclxuICAgIH0sXHJcbiAgICBzZW5kVG9TZXJ2ZXI6IGZ1bmN0aW9uIHNlbmRUb1NlcnZlcigpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnU3VjY2VzcyEnKTtcclxuICAgIH1cclxufTtcclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24gKCkge1xyXG4gICAgaGVhZGVyU2xpZGVyLnBsYXkoKTtcclxuICAgIHZpZGVvLnJlbmRlcigpO1xyXG4gICAgcmV2aWV3LnBsYXkoKTtcclxuICAgIHZhbGlkYXRlLnN0YXJ0VmFsaWQoKTtcclxufSk7XHJcblxyXG5wcmVsb2FkLmFjdGl2ZSgpOyJdfQ==
